# 7.数码管驱动电路分析

在本项目中使用了两颗0.28寸的三位共阴数码管作为显示器件，相较于显示屏，数码管在复杂环境中拥有更好的识别度，可以根据实际使用环境的需求，改为更小的限流电阻实现更高的数码管亮度；在另一方面，数码管拥有较好的机械性能，不会像显示屏一样容易被外力损坏。在工业等有稳定可靠性应用中，多被采用。从开发版学习的角度来看，更易有目的的学习电子测量原理相关开发。

<img src="https://raw.githubusercontent.com/hazy1k/My-drawing-bed/main/2024/11/21-19-19-21-屏幕截图%202024-11-21%20191911.png" title="" alt="屏幕截图 2024-11-21 191911.png" width="529">

## 7.1 要点说明

1. 使用共阴极数码管；
2. 依据MCU IO口高电平拉电流/灌电流能力选择合适数码管参数。

在本项目中，经过实际测试，数码管的限流电阻（R1~R6）被配置为300Ω，对应的亮度无论是红色还是蓝色数码管，均具有较好的识别度，且亮度柔和不刺眼。

## 7.2 数码管的驱动原理

<img src="https://raw.githubusercontent.com/hazy1k/My-drawing-bed/main/2024/11/21-19-21-38-屏幕截图%202024-11-21%20192134.png" title="" alt="屏幕截图 2024-11-21 192134.png" width="543">

数码管的驱动原理主要涉及到通过控制数码管的各个灯段的开关状态来显示数字、字母或符号。以下是详细的驱动原理说明：

1. 数码管的基本构成：
   
   - 数码管通常由七段或八段LED（本项目为8段）组成，每个段代表数码管的一部分，可以显示数字0-9、字母A-F等字符。
   - 数码管有共阴极和共阳极两种类型，它们的区别在于LED的公共端COM（即连接所有LED的一端）是连接到电源的负极还是正极。

2. 驱动方式：
   
   - 段选：通过控制数码管的各个灯段的开关状态来显示所需的数字或字符。每个灯段对应一个控制信号，当控制信号开启时，该段会显示点亮，反之则灭掉。（a、b、c、d、e、f、g、dp）
   - 位选：通过控制数码管的位线来选择需要显示的数码管。位线控制是将需要显示的数码管的位线设置为高电平，其他数码管的位线设置为低电平。通过不断地切换位线的状态，可以实现多个数码管之间的显示切换。

3. 驱动电路：
   
   - 数码管驱动电路可以通过硬件电路实现，如使用数字信号处理器（DSP）、微控制器（MCU）或移位寄存器等集成电路来生成适合LED的控制信号。
   - 这些控制信号可以是脉冲宽度调制（PWM）信号、串行数据信号等形式。通过控制这些信号的频率、宽度和幅度，可以实现数码管的亮暗控制，从而显示出所需的数字或字母。

4. 软件控制：
   
   - 除了硬件驱动电路，还可以通过软件控制来实现数码管的驱动。通过编程生成适合数码管的控制信号，可以实现更加灵活和复杂的显示效果，如数字的滚动显示、交替显示等。

5. 共阴极与共阳极数码管的驱动：
   
   - 对于共阴极数码管，共阴极引脚连接到电源的负极，控制引脚连接到控制芯片的输出引脚。当需要显示某个数字时，控制芯片会输出相应的编码信号到控制引脚，使得对应的LED段点亮。
   - 对于共阳极数码管，工作原理与共阴极数码管相似，只是共阳极引脚连接到电源的正极，控制引脚连接到控制芯片的输出引脚。

6. 编码显示：
   
   - 为了使数码管显示出相应的数字或字符，必须使段数据口输出相应的字形编码。例如，要显示数字“0”，共阳极数码管的字型编码为11000000B（即C0H），而共阴极数码管的字型编码为00111111B（即3FH），具体编码以实际数码管为准。

7. 动态显示与静态显示：
   
   - 数码管可以采用静态显示或动态显示方式。静态显示时，每个数码管的8个字段分别与一个8位I/O口地址相连，I/O口只要有段码输出，相应字符即显示出来并保持不变。动态显示则是一位一位地轮流点亮各位数码管，通过快速切换实现人眼视觉上的同时显示。

总结来说，数码管的驱动原理是通过控制数码管的各个灯段的开关状态来显示数字、字母或符号，并通过段选和位选的方式实现多个数码管之间的显示切换。同时，可以通过硬件电路或软件控制来实现数码管的驱动，并根据需要选择共阴极或共阳极数码管进行驱动。
