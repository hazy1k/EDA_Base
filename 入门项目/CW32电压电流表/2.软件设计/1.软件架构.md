# 1.软件架构

![屏幕截图 2024-11-21 193342.png](https://raw.githubusercontent.com/hazy1k/My-drawing-bed/main/2024/11/21-19-33-45-屏幕截图%202024-11-21%20193342.png)

上图展示了CW32电流表实现功能所必备的模块和程序功能。主要包含如下部分：

- 基础模块：RCC时钟模块、GPIO启动模块；
- 核心模块：BTIM中断控制、ADC模数转换模块；
- 外围模块：LED驱动、数码管驱动、按钮驱动；
- 辅助模块：数据存取、数据处理。

该架构实现电压电流表测量的主要逻辑为：

- 使用两种循环机制（图中带背景区域）：
  - BTIM中断控制配合时钟实现数据获取、数据显示、读取按键的内部计算；
  - While循环实现外部数据处理和数码管显示更新。
